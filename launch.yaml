env:
  base:
    DEBUG: true
    DJANGO_SETTINGS_MODULE: bakerydemo.settings.local
    UWSGI_WSGI_FILE: bakerydemo/wsgi.py
  # specific environments (builds on base)
  production:
    DEBUG: false
resources:
  database:
    type: postgres
  cache:
    type: redis
  storage:
    type: s3
phases:
  setup:
    - pip3 install -r requirements/production.txt
    - cp bakerydemo/settings/local.py.example bakerydemo/settings/local.py
  tenant:
    - python3 manage.py migrate --noinput
    - python3 manage.py load_initial_data
routes:
  site:
    route: /
    type: wsgi
    options:
      path: bakerydemo/wsgi.py
      var: application
